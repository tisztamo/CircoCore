<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Reference · CircoCore</title><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link href="../assets/favicon.ico" rel="icon" type="image/x-icon"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../"><img src="../assets/logo.png" alt="CircoCore logo"/></a><div class="docs-package-name"><span class="docs-autofit">CircoCore</span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Introducing CircoCore</a></li><li><a class="tocitem" href="../install/">Installation</a></li><li><a class="tocitem" href="../tutorial/">Tutorial</a></li><li class="is-active"><a class="tocitem" href>Reference</a></li><li><a class="tocitem" href="../troubleshooting/">Troubleshooting</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Reference</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Reference</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/Circo-dev/CircoCore/blob/master/docs/src/reference.md#L" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Reference-1"><a class="docs-heading-anchor" href="#Reference-1">Reference</a><a class="docs-heading-anchor-permalink" href="#Reference-1" title="Permalink"></a></h1><ul><li><a href="#CircoCore.AbstractActor"><code>CircoCore.AbstractActor</code></a></li><li><a href="#CircoCore.ActorId"><code>CircoCore.ActorId</code></a></li><li><a href="#CircoCore.Addr"><code>CircoCore.Addr</code></a></li><li><a href="#CircoCore.Infoton"><code>CircoCore.Infoton</code></a></li><li><a href="#CircoCore.NameQuery"><code>CircoCore.NameQuery</code></a></li><li><a href="#CircoCore.Pos"><code>CircoCore.Pos</code></a></li><li><a href="#CircoCore.PostCode"><code>CircoCore.PostCode</code></a></li><li><a href="#CircoCore.RecipientMoved"><code>CircoCore.RecipientMoved</code></a></li><li><a href="#CircoCore.addr-Tuple{AbstractActor}"><code>CircoCore.addr</code></a></li><li><a href="#CircoCore.apply_infoton-Tuple{AbstractActor,Infoton}"><code>CircoCore.apply_infoton</code></a></li><li><a href="#CircoCore.box-Tuple{Addr}"><code>CircoCore.box</code></a></li><li><a href="#CircoCore.die-Tuple{ActorService,AbstractActor}"><code>CircoCore.die</code></a></li><li><a href="#CircoCore.getname-Tuple{Any,String}"><code>CircoCore.getname</code></a></li><li><a href="#CircoCore.id-Tuple{AbstractActor}"><code>CircoCore.id</code></a></li><li><a href="#CircoCore.isbaseaddress-Tuple{Addr}"><code>CircoCore.isbaseaddress</code></a></li><li><a href="#CircoCore.migrate-Tuple{ActorService,AbstractActor,String}"><code>CircoCore.migrate</code></a></li><li><a href="#CircoCore.onmessage-Tuple{AbstractActor,Any,Any}"><code>CircoCore.onmessage</code></a></li><li><a href="#CircoCore.onmigrate-Tuple{AbstractActor,Any}"><code>CircoCore.onmigrate</code></a></li><li><a href="#CircoCore.onschedule-Tuple{AbstractActor,Any}"><code>CircoCore.onschedule</code></a></li><li><a href="#CircoCore.pos-Tuple{AbstractActor}"><code>CircoCore.pos</code></a></li><li><a href="#CircoCore.redirect-Tuple{Addr,String}"><code>CircoCore.redirect</code></a></li><li><a href="#CircoCore.registername-Tuple{Any,String,AbstractActor}"><code>CircoCore.registername</code></a></li><li><a href="#CircoCore.send-Union{Tuple{TScheduler}, Tuple{TBody}, Tuple{ActorService{TScheduler},AbstractActor,Addr,TBody}, Tuple{ActorService{TScheduler},AbstractActor,Addr,TBody,Real}} where TScheduler where TBody"><code>CircoCore.send</code></a></li><li><a href="#CircoCore.spawn-Tuple{ActorService,AbstractActor}"><code>CircoCore.spawn</code></a></li></ul><article class="docstring"><header><a class="docstring-binding" id="CircoCore.AbstractActor" href="#CircoCore.AbstractActor"><code>CircoCore.AbstractActor</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia">abstract type AbstractActor</code></pre><p>Supertype of all actors.</p><p>Subtypes must be mutable and must provide a field <code>core::CoreState</code> that can remain undefined after creation.</p><p><strong>Examples</strong></p><pre><code class="language-julia">mutable struct DataHolder{TValue} &lt;: AbstractActor
    value::TValue
    core::CoreState
    DataHolder(value) = new{typeof(value)}(value)
end</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Circo-dev/CircoCore/blob/39457bd1e5660cde4a9d059feb0dd9d0076cd0bb/src/CircoCore.jl#LL17-L34">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CircoCore.ActorId" href="#CircoCore.ActorId"><code>CircoCore.ActorId</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia">ActorId</code></pre><p>A cluster-unique id that is randomly generated when the actor is spawned (first scheduled).</p><p><code>ActorId</code> is an alias to <code>UInt64</code> at the time, so it may pop up in error messages as such.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Circo-dev/CircoCore/blob/39457bd1e5660cde4a9d059feb0dd9d0076cd0bb/src/CircoCore.jl#LL8-L14">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CircoCore.Addr" href="#CircoCore.Addr"><code>CircoCore.Addr</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia">Addr(postcode::PostCode, box::ActorId)
Addr(readable_address::String)</code></pre><p>The full address of an actor.</p><p>If the referenced actor migrates to a different scheduler, messages sent to the old address will bounce back as <a href="#CircoCore.RecipientMoved"><code>RecipientMoved</code></a> and the Addr must be updated manually.</p><p><strong>Examples</strong></p><p>Addr(&quot;192.168.1.11:24721&quot;, 0xbc6ac81fc7e4ea2)</p><p>Addr(&quot;192.168.1.11:24721/bc6ac81fc7e4ea2&quot;)</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Circo-dev/CircoCore/blob/39457bd1e5660cde4a9d059feb0dd9d0076cd0bb/src/CircoCore.jl#LL55-L71">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CircoCore.Infoton" href="#CircoCore.Infoton"><code>CircoCore.Infoton</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia">Infoton(sourcepos::Pos, energy::Real = 1)</code></pre><p>Create an Infoton that carries <code>abs(energy)</code> amount of energy and has the sign <code>sign(energy)</code>.</p><p>The infoton mediates the force that awakens between communicating actors. When arriving at its target actor, the infoton pulls/pushes the actor toward/away from its source, depending on its sign (positive pulls).</p><p>The exact details of how the Infoton should act at its target is actively researched. Please check or overload <a href="#CircoCore.apply_infoton-Tuple{AbstractActor,Infoton}"><code>apply_infoton</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Circo-dev/CircoCore/blob/39457bd1e5660cde4a9d059feb0dd9d0076cd0bb/src/CircoCore.jl#LL154-L165">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CircoCore.NameQuery" href="#CircoCore.NameQuery"><code>CircoCore.NameQuery</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia">NameQuery(name::String) &lt;: Request</code></pre><p>A query that can be sent to a remote scheduler for querying its local registry.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Circo-dev/CircoCore/blob/39457bd1e5660cde4a9d059feb0dd9d0076cd0bb/src/registry.jl#LL4-L8">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CircoCore.Pos" href="#CircoCore.Pos"><code>CircoCore.Pos</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia">Pos(x::Real, y::Real, z::Real)</code></pre><p>A point in the 3D &quot;actor space&quot;.</p><p>Pos is currently an alias to VecE3{Float32}. See <a href="https://github.com/sisl/Vec.jl">Vec.jl</a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Circo-dev/CircoCore/blob/39457bd1e5660cde4a9d059feb0dd9d0076cd0bb/src/CircoCore.jl#LL139-L145">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CircoCore.PostCode" href="#CircoCore.PostCode"><code>CircoCore.PostCode</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia">PostCode</code></pre><p>A string that identifies a scheduler.</p><p><strong>Examples</strong></p><p>&quot;192.168.1.11:24721&quot;</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Circo-dev/CircoCore/blob/39457bd1e5660cde4a9d059feb0dd9d0076cd0bb/src/CircoCore.jl#LL42-L51">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CircoCore.RecipientMoved" href="#CircoCore.RecipientMoved"><code>CircoCore.RecipientMoved</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia">RecipientMoved{TBody}</code></pre><p>If a message is undeliverable because the tartget actor moved to a known lcoation, this message will be sent back to the sender. The original message will not be delivered, but it gets included in the <code>RecipientMoved</code> message.</p><pre><code class="language-none">struct RecipientMoved{TBody}
    oldaddress::Addr
    newaddress::Addr
    originalmessage::TBody
end</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Circo-dev/CircoCore/blob/39457bd1e5660cde4a9d059feb0dd9d0076cd0bb/src/migration.jl#LL14-L28">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CircoCore.addr-Tuple{AbstractActor}" href="#CircoCore.addr-Tuple{AbstractActor}"><code>CircoCore.addr</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">addr(a::AbstractActor)</code></pre><p>Return the address of the actor.</p><p>Call this on a spawned actor to get its address. Throws <code>UndefRefError</code> if the actor is not spawned.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Circo-dev/CircoCore/blob/39457bd1e5660cde4a9d059feb0dd9d0076cd0bb/src/CircoCore.jl#LL112-L118">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CircoCore.box-Tuple{Addr}" href="#CircoCore.box-Tuple{Addr}"><code>CircoCore.box</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">box(a::Addr)::ActorId</code></pre><p>Return the box of the address, that is the id of the actor.</p><p>When the actor migrates, its box remains the same, only the PostCode of the address changes.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Circo-dev/CircoCore/blob/39457bd1e5660cde4a9d059feb0dd9d0076cd0bb/src/CircoCore.jl#LL86-L92">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CircoCore.die-Tuple{ActorService,AbstractActor}" href="#CircoCore.die-Tuple{ActorService,AbstractActor}"><code>CircoCore.die</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">die(service, me::AbstractActor)</code></pre><p>Unschedule the actor from its current scheduler.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Circo-dev/CircoCore/blob/39457bd1e5660cde4a9d059feb0dd9d0076cd0bb/src/service.jl#LL115-L119">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CircoCore.getname-Tuple{Any,String}" href="#CircoCore.getname-Tuple{Any,String}"><code>CircoCore.getname</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">function getname(service, name::String)::Union{Addr, Nothing}</code></pre><p>Return the registered name from the scheduler-local registry, or nothing.</p><p>See also: <a href="#CircoCore.NameQuery"><code>NameQuery</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Circo-dev/CircoCore/blob/39457bd1e5660cde4a9d059feb0dd9d0076cd0bb/src/service.jl#LL137-L143">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CircoCore.id-Tuple{AbstractActor}" href="#CircoCore.id-Tuple{AbstractActor}"><code>CircoCore.id</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">id(a::AbstractActor)</code></pre><p>Return the id of the actor.</p><p>Call this on a spawned actor to get its id (aka box). Throws <code>UndefRefError</code> if the actor is not spawned.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Circo-dev/CircoCore/blob/39457bd1e5660cde4a9d059feb0dd9d0076cd0bb/src/CircoCore.jl#LL121-L127">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CircoCore.migrate-Tuple{ActorService,AbstractActor,String}" href="#CircoCore.migrate-Tuple{ActorService,AbstractActor,String}"><code>CircoCore.migrate</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">migrate(service, actor::AbstractActor, topostcode::PostCode)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Circo-dev/CircoCore/blob/39457bd1e5660cde4a9d059feb0dd9d0076cd0bb/src/migration.jl#LL77-L81">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CircoCore.onmessage-Tuple{AbstractActor,Any,Any}" href="#CircoCore.onmessage-Tuple{AbstractActor,Any,Any}"><code>CircoCore.onmessage</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">onmessage(me::AbstractActor, message, service)</code></pre><p>Handle a message arriving at an actor.</p><p>Only the payload of the message is delivered, there is currently no way to access the infoton or the sender address. If you need a reply, include the sender address in the request.</p><p>Note: Do not forget to import it or use its qualified name to allow overloading!</p><p><strong>Examples</strong></p><pre><code class="language-julia">import CircoCore.onmessage

struct TestRequest
    replyto::Addr
end

struct TestResponse end

function onmessage(me::MyActor, message::TestRequest, service)
    send(service, me, message.replyto, TestResponse())
end</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Circo-dev/CircoCore/blob/39457bd1e5660cde4a9d059feb0dd9d0076cd0bb/src/CircoCore.jl#LL214-L239">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CircoCore.onmigrate-Tuple{AbstractActor,Any}" href="#CircoCore.onmigrate-Tuple{AbstractActor,Any}"><code>CircoCore.onmigrate</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">onmigrate(me::AbstractActor, service)</code></pre><p>Lifecycle callback that marks a successful migration.</p><p>It is called on the target scheduler, before any messages will be delivered.</p><p>Note: Do not forget to import it or use its qualified name to allow overloading!</p><p><strong>Examples</strong></p><pre><code class="language-julia">import CircoCore.onmigrate

function onmigrate(me::MyActor, service)
    println(&quot;Successfully migrated, registering a name on the new scheduler&quot;)
    registername(service, &quot;MyActor&quot;, me)
end</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Circo-dev/CircoCore/blob/39457bd1e5660cde4a9d059feb0dd9d0076cd0bb/src/CircoCore.jl#LL242-L260">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CircoCore.onschedule-Tuple{AbstractActor,Any}" href="#CircoCore.onschedule-Tuple{AbstractActor,Any}"><code>CircoCore.onschedule</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">CircoCore.onschedule(me::AbstractActor, service)</code></pre><p>Lifecycle callback that marks the first scheduling of the actor, called during spawning, before any <code>onmessage</code>.</p><p>Note: Do not forget to import it or use its qualified name to allow overloading!</p><p><strong>Examples</strong></p><pre><code class="language-julia">import CircoCore.onschedule

funtion onschedule(me::MyActor, service)
    registername(service, &quot;MyActor&quot;, me) # Register this actor in the local name service
end</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Circo-dev/CircoCore/blob/39457bd1e5660cde4a9d059feb0dd9d0076cd0bb/src/CircoCore.jl#LL195-L211">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CircoCore.pos-Tuple{AbstractActor}" href="#CircoCore.pos-Tuple{AbstractActor}"><code>CircoCore.pos</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">pos(a::AbstractActor)::Pos</code></pre><p>return the current position of the actor.</p><p>Call this on a spawned actor to get its position. Throws <code>UndefRefError</code> if the actor is not spawned.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Circo-dev/CircoCore/blob/39457bd1e5660cde4a9d059feb0dd9d0076cd0bb/src/CircoCore.jl#LL130-L136">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CircoCore.redirect-Tuple{Addr,String}" href="#CircoCore.redirect-Tuple{Addr,String}"><code>CircoCore.redirect</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">redirect(addr::Addr, topostcode::PostCode):Addr</code></pre><p>Create a new Addr by replacing the postcode of the given one.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Circo-dev/CircoCore/blob/39457bd1e5660cde4a9d059feb0dd9d0076cd0bb/src/CircoCore.jl#LL105-L109">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CircoCore.registername-Tuple{Any,String,AbstractActor}" href="#CircoCore.registername-Tuple{Any,String,AbstractActor}"><code>CircoCore.registername</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">registername(service, name::String, actor::AbstractActor)</code></pre><p>Register the given actor under the given name in the scheduler-local name registry.</p><p>Note that there is no need to unregister the name when migrating or dying</p><p><strong>TODO implement manual and auto-unregistration</strong></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Circo-dev/CircoCore/blob/39457bd1e5660cde4a9d059feb0dd9d0076cd0bb/src/service.jl#LL124-L132">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CircoCore.send-Union{Tuple{TScheduler}, Tuple{TBody}, Tuple{ActorService{TScheduler},AbstractActor,Addr,TBody}, Tuple{ActorService{TScheduler},AbstractActor,Addr,TBody,Real}} where TScheduler where TBody" href="#CircoCore.send-Union{Tuple{TScheduler}, Tuple{TBody}, Tuple{ActorService{TScheduler},AbstractActor,Addr,TBody}, Tuple{ActorService{TScheduler},AbstractActor,Addr,TBody,Real}} where TScheduler where TBody"><code>CircoCore.send</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">send(service, sender::AbstractActor, to::Addr, messagebody::Any, energy::Real = 1; timeout::Second = Second(2))</code></pre><p>Send a message from an actor to an another.</p><p>Part of the actor API, can be called from a lifecycle callback, providing the <code>service</code> you got.</p><p><code>messagebody</code> can be of any type, but a current limitation of inter-node communication is that the serialized form of <code>messagebody</code> must fit in an IPv4 UDP packet with ~100 bytes margin. The exact value depends on the MTU size of the network and changing implementation details, but 1380 bytes can be considered safe. You may be able to tune your system to get higher values.</p><p>If <code>messagebody</code> is a <code>Request</code>, a timeout will be set for the token of it. The <code>timeout</code> keyword argument can be used to control the deadline.</p><p><code>energy</code> sets the energy and sign of the Infoton attached to the message.</p><p><strong>Examples</strong></p><pre><code class="language-julia">const QUERY = &quot;The Ultimate Question of Life, The Universe, and Everything.&quot;

mutable struct MyActor &lt;: AbstractActor
    searcher::Addr
    core:: CoreState
    MyActor() = new()
end

struct Start end

struct Search
    query::String
end

[...] # Spawn the searcher or receive its address


function CircoCore.onmessage(me::MyActor, message::Start, service)
    send(service,
            me,
            me.searcher, 
            Search(QUERY, addr(me)))
end</code></pre><p><strong>Implementation</strong></p><p>Please note that <code>service</code> is always the last argument of lifecycle callbacks like <code>onmessage</code>. It&#39;s because <code>onmessage</code> is dynamically dispatched, and <code>service</code> provides no information about where to dispatch. (Only one service instance exists as of <code>v&quot;0.2.0&quot;</code>)</p><p>On the other hand, actor API endpoints like <code>send</code> are always statically dispatched, thus they can accept the service as their first argument, allowing the user to treat e.g. &quot;<code>spawn(service</code>&quot; as a single unit of thought and not forget to write out the meaningless <code>service</code>.</p><p>Consistency is just as important as convenience. But performance is king. </p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Circo-dev/CircoCore/blob/39457bd1e5660cde4a9d059feb0dd9d0076cd0bb/src/service.jl#LL7-L65">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CircoCore.spawn-Tuple{ActorService,AbstractActor}" href="#CircoCore.spawn-Tuple{ActorService,AbstractActor}"><code>CircoCore.spawn</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">spawn(service, actor::AbstractActor, [pos::Pos])::Addr</code></pre><p>Spawn the given actor on the scheduler represented by <code>service</code>, return the address of it.</p><p>Part of the actor API, can be called from a lifecycle callback, providing the <code>service</code> you got.</p><p>The <code>onschedule</code> callback of <code>actor</code> will run before this function returns.</p><p><strong>Examples</strong></p><pre><code class="language-none">mutable struct ListItem{TData} &lt;: AbstractActor
    data::TData
    next::Addr
    core::CoreState
    ListItem(data) = new{typeof(data)}(data)
end

struct Append{TData}
    value::TData
end

function CircoCore.onmessage(me::ListItem, message::Append, service)
    me.next = spawn(service, ListItem(message.value))
end</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Circo-dev/CircoCore/blob/39457bd1e5660cde4a9d059feb0dd9d0076cd0bb/src/service.jl#LL77-L104">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CircoCore.apply_infoton-Tuple{AbstractActor,Infoton}" href="#CircoCore.apply_infoton-Tuple{AbstractActor,Infoton}"><code>CircoCore.apply_infoton</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">apply_infoton(targetactor::AbstractActor, infoton::Infoton)</code></pre><p>An infoton acting on an actor.</p><p>Please check the source and the examples for more info.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Circo-dev/CircoCore/blob/39457bd1e5660cde4a9d059feb0dd9d0076cd0bb/src/space.jl#LL8-L14">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CircoCore.isbaseaddress-Tuple{Addr}" href="#CircoCore.isbaseaddress-Tuple{Addr}"><code>CircoCore.isbaseaddress</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">isbaseaddress(addr::Addr)::Bool</code></pre><p>Return true if <code>addr</code> is a base address, meaning it references a scheduler directly.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Circo-dev/CircoCore/blob/39457bd1e5660cde4a9d059feb0dd9d0076cd0bb/src/CircoCore.jl#LL95-L99">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../tutorial/">« Tutorial</a><a class="docs-footer-nextpage" href="../troubleshooting/">Troubleshooting »</a></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Friday 12 June 2020 13:27">Friday 12 June 2020</span>. Using Julia version 1.4.0.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
